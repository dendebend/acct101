<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCT101 - Journal Entry Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 25px;
            font-size: 1.05em;
        }

        .info-box {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .info-box h3 {
            color: #92400e;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-box p {
            color: #78350f;
            line-height: 1.6;
        }

        .progress-container {
            background: #e5e7eb;
            border-radius: 10px;
            height: 30px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9em;
        }

        .question {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-header {
            font-size: 1.1em;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .scenario {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #1e40af;
            line-height: 1.6;
            font-size: 1.05em;
        }

        .entry-builder {
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .entry-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 15px;
            font-size: 1.05em;
        }

        .entry-line {
            display: grid;
            grid-template-columns: 80px 1fr 150px;
            gap: 15px;
            align-items: center;
            margin-bottom: 12px;
        }

        .entry-label {
            font-weight: 600;
            color: #6b7280;
            font-size: 0.95em;
        }

        .account-select, .amount-input {
            padding: 10px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 1em;
            font-family: inherit;
        }

        .account-select:focus, .amount-input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .amount-input {
            text-align: right;
            font-family: 'Courier New', monospace;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .hint-btn, .check-btn, .reset-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.2s ease;
        }

        .hint-btn {
            background: #3b82f6;
            color: white;
        }

        .hint-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .check-btn {
            background: #10b981;
            color: white;
        }

        .check-btn:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .reset-btn {
            background: #f59e0b;
            color: white;
        }

        .reset-btn:hover {
            background: #d97706;
            transform: translateY(-1px);
        }

        .hint {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            display: none;
            color: #1e40af;
            line-height: 1.6;
        }

        .hint.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
            line-height: 1.6;
        }

        .feedback.correct {
            background: #d1fae5;
            border: 2px solid #10b981;
            color: #065f46;
            display: block;
        }

        .feedback.incorrect {
            background: #fee2e2;
            border: 2px solid #ef4444;
            color: #991b1b;
            display: block;
        }

        .feedback.partial {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            color: #92400e;
            display: block;
        }

        .feedback-details {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 300px; }
        }

        @media (max-width: 768px) {
            .entry-line {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .entry-label {
                margin-bottom: -5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Journal Entry Builder</h1>
        <p class="subtitle">Build complete journal entries with dynamic scenarios!</p>

        <div class="info-box">
            <h3>How to Use:</h3>
            <p>Each scenario presents a business transaction. Build the complete journal entry by selecting the correct accounts and entering the amounts. Remember: <strong>Debits must equal Credits!</strong> Values change each time you reload the page for unlimited practice.</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar">0/15 (0%)</div>
        </div>

        <div id="questionsContainer"></div>

    </div>

    <script>
        // Account list for dropdowns
        const accounts = [
            '-- Select Account --',
            'Cash',
            'Accounts Receivable',
            'Supplies',
            'Prepaid Insurance',
            'Prepaid Rent',
            'Equipment',
            'Accumulated Depreciation',
            'Accounts Payable',
            'Salaries Payable',
            'Interest Payable',
            'Unearned Revenue',
            'Notes Payable',
            'Common Stock',
            'Retained Earnings',
            'Dividends',
            'Service Revenue',
            'Interest Revenue',
            'Rent Expense',
            'Salaries Expense',
            'Insurance Expense',
            'Supplies Expense',
            'Depreciation Expense',
            'Interest Expense',
            'Utilities Expense'
        ];

        // Random number generator with range
        function random(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Random choice from array
        function choose(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        // Format currency
        function fmt(amount) {
            return '$' + amount.toLocaleString();
        }

        // Generate dynamic scenarios
        const scenarios = [
            // Simple cash transactions
            {
                id: 1,
                generate: () => {
                    const amount = random(5, 50) * 100;
                    return {
                        text: `The company purchases equipment for ${fmt(amount)} cash.`,
                        hint: "Asset purchased with cash = DR Asset (increase), CR Cash (decrease).",
                        entries: [
                            { account: 'Equipment', type: 'DR', amount: amount },
                            { account: 'Cash', type: 'CR', amount: amount }
                        ]
                    };
                }
            },
            {
                id: 2,
                generate: () => {
                    const amount = random(10, 80) * 100;
                    return {
                        text: `The company provides services and receives ${fmt(amount)} cash immediately.`,
                        hint: "Services performed for cash = DR Cash (increase), CR Revenue (earned).",
                        entries: [
                            { account: 'Cash', type: 'DR', amount: amount },
                            { account: 'Service Revenue', type: 'CR', amount: amount }
                        ]
                    };
                }
            },
            {
                id: 3,
                generate: () => {
                    const amount = random(15, 60) * 100;
                    return {
                        text: `The company pays ${fmt(amount)} cash for rent expense for the current month.`,
                        hint: "Expense paid in cash = DR Expense (incurred), CR Cash (decrease).",
                        entries: [
                            { account: 'Rent Expense', type: 'DR', amount: amount },
                            { account: 'Cash', type: 'CR', amount: amount }
                        ]
                    };
                }
            },

            // On account transactions
            {
                id: 4,
                generate: () => {
                    const amount = random(20, 90) * 100;
                    return {
                        text: `The company provides services for ${fmt(amount)} on account (customer will pay later).`,
                        hint: "Services on account = DR Accounts Receivable (customer owes), CR Revenue (earned).",
                        entries: [
                            { account: 'Accounts Receivable', type: 'DR', amount: amount },
                            { account: 'Service Revenue', type: 'CR', amount: amount }
                        ]
                    };
                }
            },
            {
                id: 5,
                generate: () => {
                    const amount = random(10, 50) * 100;
                    return {
                        text: `The company purchases supplies for ${fmt(amount)} on account (will pay supplier later).`,
                        hint: "Purchased on account = DR Asset (supplies), CR Accounts Payable (owe supplier).",
                        entries: [
                            { account: 'Supplies', type: 'DR', amount: amount },
                            { account: 'Accounts Payable', type: 'CR', amount: amount }
                        ]
                    };
                }
            },
            {
                id: 6,
                generate: () => {
                    const amount = random(10, 70) * 100;
                    return {
                        text: `The company collects ${fmt(amount)} cash from a customer who owed money.`,
                        hint: "Collecting receivables = DR Cash (increase), CR Accounts Receivable (decrease what's owed).",
                        entries: [
                            { account: 'Cash', type: 'DR', amount: amount },
                            { account: 'Accounts Receivable', type: 'CR', amount: amount }
                        ]
                    };
                }
            },

            // Prepaid adjustments
            {
                id: 7,
                generate: () => {
                    const months = choose([6, 12]);
                    const total = random(12, 48) * 100;
                    const monthsPassed = choose([1, 2]);
                    const monthly = total / months;
                    const adjustment = monthly * monthsPassed;
                    return {
                        text: `The company paid ${fmt(total)} for a ${months}-month insurance policy. ${monthsPassed} month(s) have passed.`,
                        hint: `Calculate monthly cost: ${fmt(total)} ÷ ${months} months = ${fmt(monthly)}. Then multiply by ${monthsPassed} month(s) passed.`,
                        entries: [
                            { account: 'Insurance Expense', type: 'DR', amount: adjustment },
                            { account: 'Prepaid Insurance', type: 'CR', amount: adjustment }
                        ]
                    };
                }
            },
            {
                id: 8,
                generate: () => {
                    const months = choose([3, 6, 12]);
                    const total = random(18, 72) * 100;
                    const monthsPassed = choose([1, 2]);
                    const monthly = total / months;
                    const adjustment = monthly * monthsPassed;
                    return {
                        text: `Prepaid rent of ${fmt(total)} was paid for ${months} months. ${monthsPassed} month(s) have now passed.`,
                        hint: `Monthly rent: ${fmt(total)} ÷ ${months} = ${fmt(monthly)}. Expense ${monthsPassed} month(s): ${fmt(monthly)} × ${monthsPassed}.`,
                        entries: [
                            { account: 'Rent Expense', type: 'DR', amount: adjustment },
                            { account: 'Prepaid Rent', type: 'CR', amount: adjustment }
                        ]
                    };
                }
            },

            // Unearned revenue
            {
                id: 9,
                generate: () => {
                    const months = choose([3, 6]);
                    const total = random(30, 90) * 100;
                    const monthsPassed = 1;
                    const monthly = total / months;
                    const earned = monthly * monthsPassed;
                    return {
                        text: `The company received ${fmt(total)} cash for services to be performed over ${months} months. ${monthsPassed} month has passed.`,
                        hint: `Monthly revenue: ${fmt(total)} ÷ ${months} = ${fmt(monthly)}. After 1 month, ${fmt(monthly)} has been earned.`,
                        entries: [
                            { account: 'Unearned Revenue', type: 'DR', amount: earned },
                            { account: 'Service Revenue', type: 'CR', amount: earned }
                        ]
                    };
                }
            },

            // Supplies adjustment
            {
                id: 10,
                generate: () => {
                    const beginning = random(10, 40) * 100;
                    const purchased = random(5, 20) * 100;
                    const ending = random(5, 25) * 100;
                    const used = beginning + purchased - ending;
                    return {
                        text: `Supplies: Beginning balance ${fmt(beginning)}, purchased ${fmt(purchased)}, ending count shows ${fmt(ending)} remaining.`,
                        hint: `Available supplies = ${fmt(beginning)} + ${fmt(purchased)} = ${fmt(beginning + purchased)}. Used = ${fmt(beginning + purchased)} - ${fmt(ending)}.`,
                        entries: [
                            { account: 'Supplies Expense', type: 'DR', amount: used },
                            { account: 'Supplies', type: 'CR', amount: used }
                        ]
                    };
                }
            },

            // Accrued expenses
            {
                id: 11,
                generate: () => {
                    const amount = random(20, 80) * 100;
                    return {
                        text: `Employees earned ${fmt(amount)} in salaries this month but will be paid next month.`,
                        hint: "Work done but not paid = DR Expense (incurred), CR Payable (liability).",
                        entries: [
                            { account: 'Salaries Expense', type: 'DR', amount: amount },
                            { account: 'Salaries Payable', type: 'CR', amount: amount }
                        ]
                    };
                }
            },
            {
                id: 12,
                generate: () => {
                    const amount = random(1, 8) * 100;
                    return {
                        text: `Interest of ${fmt(amount)} has accrued on a note payable but will be paid next month.`,
                        hint: "Interest incurred but not paid = DR Interest Expense, CR Interest Payable.",
                        entries: [
                            { account: 'Interest Expense', type: 'DR', amount: amount },
                            { account: 'Interest Payable', type: 'CR', amount: amount }
                        ]
                    };
                }
            },

            // Depreciation
            {
                id: 13,
                generate: () => {
                    const cost = random(20, 100) * 1000;
                    const years = choose([5, 8, 10]);
                    const annual = cost / years;
                    return {
                        text: `Equipment costing ${fmt(cost)} has a useful life of ${years} years with no salvage value. Record one year's straight-line depreciation.`,
                        hint: `Annual depreciation = ${fmt(cost)} ÷ ${years} years = ${fmt(annual)}.`,
                        entries: [
                            { account: 'Depreciation Expense', type: 'DR', amount: annual },
                            { account: 'Accumulated Depreciation', type: 'CR', amount: annual }
                        ]
                    };
                }
            },
            {
                id: 14,
                generate: () => {
                    const cost = random(48, 120) * 1000;
                    const years = choose([8, 10, 12]);
                    const salvage = random(4, 12) * 1000;
                    const depreciable = cost - salvage;
                    const annual = depreciable / years;
                    return {
                        text: `Equipment costing ${fmt(cost)} has a ${years}-year life and ${fmt(salvage)} salvage value. Record one year's depreciation.`,
                        hint: `Depreciable amount = ${fmt(cost)} - ${fmt(salvage)} = ${fmt(depreciable)}. Annual = ${fmt(depreciable)} ÷ ${years}.`,
                        entries: [
                            { account: 'Depreciation Expense', type: 'DR', amount: annual },
                            { account: 'Accumulated Depreciation', type: 'CR', amount: annual }
                        ]
                    };
                }
            },

            // Dividends
            {
                id: 15,
                generate: () => {
                    const amount = random(10, 50) * 100;
                    return {
                        text: `The company declares and pays ${fmt(amount)} in cash dividends to shareholders.`,
                        hint: "Dividends are NOT an expense! DR Dividends (equity account), CR Cash.",
                        entries: [
                            { account: 'Dividends', type: 'DR', amount: amount },
                            { account: 'Cash', type: 'CR', amount: amount }
                        ]
                    };
                }
            }
        ];

        // Generate all questions with random values
        let questions = scenarios.map(s => s.generate());
        const checkedQuestions = new Set();

        // Render questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const qNum = idx + 1;
                const div = document.createElement('div');
                div.className = 'question';
                div.innerHTML = `
                    <div class="question-header">Question ${qNum}</div>
                    <div class="scenario">${q.text}</div>

                    <div class="entry-builder">
                        <div class="entry-title">Build the Journal Entry:</div>

                        <div class="entry-line">
                            <div class="entry-label">Debit:</div>
                            <select class="account-select" id="q${qNum}dr-account">
                                ${accounts.map(a => `<option value="${a}">${a}</option>`).join('')}
                            </select>
                            <input type="number" class="amount-input" id="q${qNum}dr-amount" placeholder="Amount">
                        </div>

                        <div class="entry-line">
                            <div class="entry-label">Credit:</div>
                            <select class="account-select" id="q${qNum}cr-account">
                                ${accounts.map(a => `<option value="${a}">${a}</option>`).join('')}
                            </select>
                            <input type="number" class="amount-input" id="q${qNum}cr-amount" placeholder="Amount">
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="hint-btn" onclick="toggleHint('hint${qNum}')">Show Hint</button>
                        <button class="check-btn" onclick="checkEntry(${qNum})">Check Entry</button>
                    </div>

                    <div class="hint" id="hint${qNum}">${q.hint}</div>
                    <div class="feedback" id="feedback${qNum}"></div>
                `;
                container.appendChild(div);
            });
        }

        function toggleHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.classList.toggle('show');
        }

        function checkEntry(qNum) {
            const q = questions[qNum - 1];
            const feedback = document.getElementById(`feedback${qNum}`);

            // Get user inputs
            const drAccount = document.getElementById(`q${qNum}dr-account`).value;
            const drAmount = parseFloat(document.getElementById(`q${qNum}dr-amount`).value) || 0;
            const crAccount = document.getElementById(`q${qNum}cr-account`).value;
            const crAmount = parseFloat(document.getElementById(`q${qNum}cr-amount`).value) || 0;

            // Validate
            let errors = [];
            let correct = true;

            // Check if accounts selected
            if (drAccount === '-- Select Account --' || crAccount === '-- Select Account --') {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '✗ Please select accounts for both debit and credit.';
                return;
            }

            // Check debit account
            if (drAccount !== q.entries[0].account) {
                errors.push(`Debit account should be <strong>${q.entries[0].account}</strong>, not ${drAccount}.`);
                correct = false;
            }

            // Check credit account
            if (crAccount !== q.entries[1].account) {
                errors.push(`Credit account should be <strong>${q.entries[1].account}</strong>, not ${crAccount}.`);
                correct = false;
            }

            // Check debit amount
            if (drAmount !== q.entries[0].amount) {
                errors.push(`Debit amount should be <strong>${fmt(q.entries[0].amount)}</strong>, not ${fmt(drAmount)}.`);
                correct = false;
            }

            // Check credit amount
            if (crAmount !== q.entries[1].amount) {
                errors.push(`Credit amount should be <strong>${fmt(q.entries[1].amount)}</strong>, not ${fmt(crAmount)}.`);
                correct = false;
            }

            // Check if debits = credits
            if (drAmount !== crAmount && drAmount > 0 && crAmount > 0) {
                errors.push(`Debits must equal credits! You have DR: ${fmt(drAmount)} and CR: ${fmt(crAmount)}.`);
                correct = false;
            }

            // Display feedback
            if (correct) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `✓ Perfect! Your journal entry is correct:<br><br>
                    <strong>DR:</strong> ${q.entries[0].account} ${fmt(q.entries[0].amount)}<br>
                    <strong>CR:</strong> ${q.entries[1].account} ${fmt(q.entries[1].amount)}`;

                if (!checkedQuestions.has(qNum)) {
                    checkedQuestions.add(qNum);
                    updateProgress();
                }
            } else if (errors.length > 0) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `✗ Not quite right:<br><br>${errors.join('<br>')}
                    <div class="feedback-details">
                        <strong>Correct Entry:</strong><br>
                        DR: ${q.entries[0].account} ${fmt(q.entries[0].amount)}<br>
                        CR: ${q.entries[1].account} ${fmt(q.entries[1].amount)}
                    </div>`;
            }
        }

        function updateProgress() {
            const total = questions.length;
            const percentage = Math.round((checkedQuestions.size / total) * 100);
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = `${checkedQuestions.size}/${total} (${percentage}%)`;
        }

        // Initialize
        window.addEventListener('load', function() {
            renderQuestions();
            updateProgress();
        });
    </script>
</body>
</html>
